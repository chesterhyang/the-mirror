@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================
   THE MIRROR - Global Styles
   Cyber-Noir Aesthetic
   ============================================ */

/* Import fonts */
@import url('https://fonts.googleapis.com/css2?family=Space+Mono:ital,wght@0,400;0,700;1,400&family=Cinzel:wght@400;700;900&family=Noto+Serif+SC:wght@400;700&display=swap');

:root {
  --void: #000000;
  --neon-red: #FF3B30;
  --terminal-green: #00FF41;
  --deep-purple: #7B2CBF;
  --cyber-blue: #00D4FF;
  --ghost-white: #E8E8E8;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  font-family: 'Space Mono', monospace;
  background-color: var(--void);
  color: var(--ghost-white);
  min-height: 100vh;
  overflow-x: hidden;
  position: relative;
}

/* Scanline overlay effect */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: repeating-linear-gradient(
    0deg,
    transparent,
    transparent 2px,
    rgba(0, 0, 0, 0.15) 2px,
    rgba(0, 0, 0, 0.15) 4px
  );
  pointer-events: none;
  z-index: 9999;
}

/* Grid background effect */
body::after {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-image:
    linear-gradient(rgba(0, 255, 65, 0.02) 1px, transparent 1px),
    linear-gradient(90deg, rgba(0, 255, 65, 0.02) 1px, transparent 1px);
  background-size: 50px 50px;
  pointer-events: none;
  z-index: -1;
}

/* Selection color */
::selection {
  background: var(--neon-red);
  color: var(--void);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 4px;
  height: 4px;
}

::-webkit-scrollbar-track {
  background: var(--void);
  border-left: 1px solid #333;
}

::-webkit-scrollbar-thumb {
  background: var(--terminal-green);
  border-radius: 0;
}

::-webkit-scrollbar-thumb:hover {
  background: var(--neon-red);
}

/* ============================================
   Utility Classes
   ============================================ */

@layer utilities {
  /* Glitch effect */
  .glitch {
    position: relative;
  }

  .glitch::before,
  .glitch::after {
    content: attr(data-text);
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
  }

  .glitch::before {
    left: 2px;
    text-shadow: -2px 0 var(--neon-red);
    clip: rect(24px, 550px, 90px, 0);
    animation: glitch-anim 2s infinite linear alternate-reverse;
  }

  .glitch::after {
    left: -2px;
    text-shadow: -2px 0 var(--cyber-blue);
    clip: rect(85px, 550px, 140px, 0);
    animation: glitch-anim 2s infinite linear alternate-reverse;
    animation-delay: -1s;
  }

  @keyframes glitch-anim {
    0% { clip: rect(42px, 9999px, 44px, 0); }
    10% { clip: rect(12px, 9999px, 59px, 0); }
    20% { clip: rect(48px, 9999px, 29px, 0); }
    30% { clip: rect(42px, 9999px, 73px, 0); }
    40% { clip: rect(25px, 9999px, 61px, 0); }
    50% { clip: rect(47px, 9999px, 39px, 0); }
    60% { clip: rect(63px, 9999px, 19px, 0); }
    70% { clip: rect(15px, 9999px, 84px, 0); }
    80% { clip: rect(55px, 9999px, 31px, 0); }
    90% { clip: rect(29px, 9999px, 68px, 0); }
    100% { clip: rect(38px, 9999px, 91px, 0); }
  }

  /* Neon text glow */
  .neon-red {
    text-shadow: 0 0 5px var(--neon-red), 0 0 10px var(--neon-red), 0 0 20px var(--neon-red);
  }

  .neon-green {
    text-shadow: 0 0 5px var(--terminal-green), 0 0 10px var(--terminal-green), 0 0 20px var(--terminal-green);
  }

  .neon-purple {
    text-shadow: 0 0 5px var(--deep-purple), 0 0 10px var(--deep-purple), 0 0 20px var(--deep-purple);
  }

  .neon-blue {
    text-shadow: 0 0 5px var(--cyber-blue), 0 0 10px var(--cyber-blue), 0 0 20px var(--cyber-blue);
  }

  /* Border glow */
  .border-glow-red {
    box-shadow: 0 0 5px var(--neon-red), inset 0 0 5px rgba(255, 59, 48, 0.1);
  }

  .border-glow-green {
    box-shadow: 0 0 5px var(--terminal-green), inset 0 0 5px rgba(0, 255, 65, 0.1);
  }

  /* Blurred/locked content */
  .blur-lock {
    filter: blur(8px);
    user-select: none;
    pointer-events: none;
  }

  /* Terminal cursor */
  .cursor-blink::after {
    content: 'â–ˆ';
    animation: blink 1s step-end infinite;
  }

  /* Matrix rain column */
  .matrix-column {
    position: absolute;
    top: -100%;
    font-size: 14px;
    line-height: 1;
    color: var(--terminal-green);
    text-shadow: 0 0 10px var(--terminal-green);
    animation: matrix-rain 10s linear infinite;
    opacity: 0.7;
  }

  @keyframes matrix-rain {
    0% {
      transform: translateY(-100%);
    }
    100% {
      transform: translateY(100vh);
    }
  }

  /* Typewriter effect */
  .typewriter {
    overflow: hidden;
    border-right: 2px solid var(--terminal-green);
    white-space: nowrap;
    animation: typing 3.5s steps(40, end), blink-caret 0.75s step-end infinite;
  }

  @keyframes typing {
    from { width: 0 }
    to { width: 100% }
  }

  @keyframes blink-caret {
    from, to { border-color: transparent }
    50% { border-color: var(--terminal-green) }
  }

  /* Harsh border style */
  .border-harsh {
    border: 1px solid #333;
    border-radius: 0;
  }

  /* Card hover effect */
  .card-hover {
    transition: all 0.15s ease-out;
  }

  .card-hover:hover {
    transform: translate(-2px, -2px);
    box-shadow: 4px 4px 0 var(--terminal-green);
  }

  .card-hover:active {
    transform: translate(0, 0);
    box-shadow: none;
  }
}

/* ============================================
   Component Styles
   ============================================ */

/* Selection cards (tarot style) */
.selection-card {
  @apply relative bg-dim-gray border border-border-harsh p-6 cursor-pointer transition-all duration-150;
  @apply hover:border-terminal-green hover:shadow-neon-green;
}

.selection-card.selected {
  @apply border-neon-red shadow-neon-red;
}

.selection-card::before {
  content: '';
  @apply absolute top-0 left-0 w-full h-full bg-gradient-to-b from-transparent to-black/20 pointer-events-none;
}

/* Cyber button */
.cyber-btn {
  @apply relative px-8 py-4 bg-void border border-terminal-green text-terminal-green font-mono uppercase tracking-widest;
  @apply transition-all duration-150;
  clip-path: polygon(0 0, calc(100% - 10px) 0, 100% 10px, 100% 100%, 10px 100%, 0 calc(100% - 10px));
}

.cyber-btn::before {
  content: '';
  @apply absolute top-0 left-0 w-full h-full bg-terminal-green/10 opacity-0 transition-opacity;
}

.cyber-btn:hover::before {
  @apply opacity-100;
}

.cyber-btn:hover {
  @apply text-void bg-terminal-green shadow-neon-green;
}

.cyber-btn:disabled {
  @apply opacity-50 cursor-not-allowed;
}

.cyber-btn:disabled:hover {
  @apply bg-void text-terminal-green shadow-none;
}

.cyber-btn:disabled:hover::before {
  @apply opacity-0;
}

/* Terminal window */
.terminal-window {
  @apply bg-void border border-border-harsh font-mono text-sm;
}

.terminal-header {
  @apply flex items-center gap-2 px-4 py-2 border-b border-border-harsh bg-dim-gray;
}

.terminal-dot {
  @apply w-3 h-3 rounded-full;
}

.terminal-body {
  @apply p-4 min-h-[300px] max-h-[500px] overflow-y-auto;
}

/* Report section */
.report-section {
  @apply relative border border-border-harsh p-6 mb-6;
}

.report-section-header {
  @apply absolute -top-3 left-4 px-2 bg-void font-serif text-lg tracking-wider;
}

/* Paywall overlay */
.paywall-overlay {
  @apply absolute inset-0 bg-void/80 backdrop-blur-sm flex flex-col items-center justify-center z-10;
}

/* Chinese serif text */
.chinese-serif {
  font-family: 'Noto Serif SC', 'Source Han Serif CN', serif;
}

/* Cinzel headings */
.heading-cinzel {
  font-family: 'Cinzel', serif;
  @apply tracking-widest uppercase;
}
